<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Article Translation Rubric</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body {
            font-family: ui-sans-serif, system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans", sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji";
        }
        .hidden-section {
            display: none;
        }
        /* Custom checkbox styles */
        .checkbox-label {
            display: flex;
            align-items: center;
            cursor: pointer;
            padding: 8px;
            border-radius: 6px;
            transition: all 0.2s;
        }
        .checkbox-label:hover {
            background-color: #f3f4f6;
        }
        .checkbox-definition {
            font-size: 0.8rem;
            color: #6b7280;
            margin-left: 0.5rem;
            font-weight: normal;
        }
    </style>
</head>
<body class="bg-gray-100 p-8">
    <div class="max-w-4xl mx-auto bg-white rounded-xl shadow-lg p-8">
        <h1 class="text-3xl font-bold text-center text-gray-800 mb-2">Article Translation Suitability Rubric</h1>
        <p class="text-center text-gray-600 mb-8">Evaluate a story's potential for translation to effectively serve Spanish-speaking communities.</p>

        <div class="p-6 bg-gray-50 rounded-lg border border-gray-200 mb-6">
            <h2 class="text-2xl font-semibold text-gray-700 mb-2">How to Use This Form</h2>
            <p class="text-gray-600 mb-4">This simplified rubric focuses solely on <strong>source diversity</strong> as the primary indicator for translation priority. By selecting all relevant sources, you ensure we are prioritizing content that is community-centered and authentically sourced.</p>
            <ol class="list-decimal list-inside space-y-2 text-gray-600">
                <li>Read the question and select all relevant Latino/Spanish-speaking source types.</li>
                <li>Click <strong>"Evaluate Sources"</strong> to immediately receive the priority score and recommendation based on source diversity.</li>
            </ol>
        </div>

        <form id="rubricForm" class="space-y-6">
            <div class="p-6 bg-gray-50 rounded-lg border border-gray-200">
                <h2 class="text-2xl font-semibold text-gray-700 mb-2">Sources <span class="text-sm font-normal text-gray-500">(Total Possible: 9)</span></h2>
                <p class="text-gray-600 mb-4">The "Sources" metric evaluates the depth of community engagement in the story by analyzing the types of Latino/Spanish-speaking voices featured.</p>
                
                <div class="space-y-6">
                    <div class="border-b pb-4">
                        <label class="block text-gray-700 font-medium mb-2">Which types of Latino/Spanish-speaking sources are featured in the story?</label>
                        <div class="flex items-start space-x-4">
                            <div class="flex-grow space-y-2 text-sm" id="relevance1Checkboxes">
                                <!-- Checkbox options -->
                                <label class="checkbox-label border border-gray-200">
                                    <input type="checkbox" name="sourceType" data-point="2" class="h-4 w-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500">
                                    <span class="font-medium ml-2">Affected (2 pts)</span>
                                    <span class="checkbox-definition">— Directly impacted by the issue (e.g., event attendee, renter, person receiving services).</span>
                                </label>
                                <label class="checkbox-label border border-gray-200">
                                    <input type="checkbox" name="sourceType" data-point="1" class="h-4 w-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500">
                                    <span class="font-medium ml-2">Expert/Analyst (1 pt)</span>
                                    <span class="checkbox-definition">— Provides professional, data-driven, or cultural expert insight.</span>
                                </label>
                                <label class="checkbox-label border border-gray-200">
                                    <input type="checkbox" name="sourceType" data-point="1" class="h-4 w-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500">
                                    <span class="font-medium ml-2">Official/Spokesperson (1 pt)</span>
                                    <span class="checkbox-definition">— Represents a government agency, community-based organization, or institution.</span>
                                </label>
                                <label class="checkbox-label border border-gray-200">
                                    <input type="checkbox" name="sourceType" data-point="2" class="h-4 w-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500">
                                    <span class="font-medium ml-2">Subject/Doer (2 pts)</span>
                                    <span class="checkbox-definition">— The person the story is primarily about (e.g., new business owner, community organizer).</span>
                                </label>
                                <label class="checkbox-label border border-gray-200">
                                    <input type="checkbox" name="sourceType" data-point="1" class="h-4 w-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500">
                                    <span class="font-medium ml-2">Reactor/Opinion (1 pt)</span>
                                    <span class="checkbox-definition">— Gives a personal reaction or general comment, but not central to the facts.</span>
                                </label>
                                <label class="checkbox-label border border-gray-200">
                                    <input type="checkbox" name="sourceType" data-point="2" class="h-4 w-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500">
                                    <span class="font-medium ml-2">Spanish-speaker (2 pts)</span>
                                    <span class="checkbox-definition">— Quote is used in Spanish (translated or original).</span>
                                </label>
                                <label class="checkbox-label border border-gray-200 bg-gray-100 mt-2">
                                    <input type="checkbox" id="noneSource" name="sourceType" data-point="0" class="h-4 w-4 text-gray-500 border-gray-300 rounded focus:ring-gray-400">
                                    <span class="font-medium ml-2 text-gray-700">None</span>
                                    <span class="checkbox-definition">— No Latino or Spanish-speaking sources featured.</span>
                                </label>
                            </div>
                            <div class="flex-shrink-0">
                                <span class="block text-gray-700 font-bold text-xl w-8 text-center" id="relevance1Value">0</span>
                                <span class="block text-gray-500 text-xs">Points</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Reflection Prompt (Hidden unless only 'None' is checked) -->
            <div id="noneReflection" class="p-4 bg-red-100 border-l-4 border-red-500 text-red-700 hidden" role="alert">
                <p class="font-bold">⚠️ Source Reflection Required</p>
                <p class="text-sm mt-1">You selected "None." Please take a moment to confirm: Is the lack of Latino/Spanish-speaking sources appropriate for this story's subject matter, or does this indicate a missed opportunity for equitable representation?</p>
            </div>
            
            <button type="submit" id="evaluateButton" disabled class="w-full bg-gray-400 text-white font-bold py-3 rounded-lg transition duration-300 cursor-not-allowed">Evaluate Sources</button>
        </form>

        <div id="results" class="mt-8 p-6 bg-gray-50 rounded-lg border border-gray-200 text-center hidden">
            <h2 class="text-xl font-bold mb-4">Evaluation Result</h2>
            <div class="flex flex-col items-center">
                <div id="resultImage" class="text-6xl mb-4"></div>
                <div class="flex flex-col md:flex-row md:items-center space-y-2 md:space-y-0 md:space-x-4">
                    <p class="text-2xl font-bold text-gray-800">Total Score: <span id="totalScore" class="text-blue-600"></span></p>
                    <p class="text-2xl font-bold text-gray-800">Priority: <span id="priority" class="text-blue-600"></span></p>
                </div>
                <div id="justificationContainer" class="mt-4 text-gray-700 w-full max-w-lg mx-auto text-left">
                    <p id="justification" class="mb-4"></p>
                </div>
            </div>
        </div>

        <div class="mt-8 pt-4 border-t border-gray-300 text-center text-sm text-gray-500">
            <p class="mb-2">By: Cristobal Villegas</p>
            <p><strong>Disclaimer:</strong> This tool is meant to be a guide for prioritization and may not be 100% accurate. If you encounter any bugs or issues, please email me at <a href="mailto:cvillegas@sltrib.com" class="text-blue-600 hover:underline">cvillegas@sltrib.com</a>.</p>
        </div>
    </div>

    <script>
        // DOM Elements
        const relevance1Checkboxes = document.getElementById('relevance1Checkboxes');
        const relevance1ValueSpan = document.getElementById('relevance1Value');
        const evaluateButton = document.getElementById('evaluateButton');
        const resultsDiv = document.getElementById('results');
        const justificationContainer = document.getElementById('justificationContainer');
        const noneReflectionDiv = document.getElementById('noneReflection');

        let r1_answered = false; 

        // --- Q1: Checkbox Logic ---

        function calculateRelevance1Score() {
            const checkboxes = relevance1Checkboxes.querySelectorAll('input[name="sourceType"]');
            const noneCheckbox = document.getElementById('noneSource');
            
            // Check for any user interaction
            let interaction = Array.from(checkboxes).some(cb => cb.checked);
            
            r1_answered = interaction;

            let score = 0;
            let onlyNoneChecked = noneCheckbox.checked && Array.from(checkboxes).filter(cb => cb.checked).length === 1;

            if (noneCheckbox.checked) {
                // If None is checked, score is 0 and all others are disabled
                score = 0;
                checkboxes.forEach(cb => {
                    if (cb.id !== 'noneSource') {
                        cb.checked = false;
                        cb.disabled = true;
                    }
                });
                // Show reflection only if 'None' is the single, explicit selection
                if (onlyNoneChecked) {
                    noneReflectionDiv.classList.remove('hidden');
                } else {
                    noneReflectionDiv.classList.add('hidden');
                }
            } else {
                // If None is unchecked, check for score from others
                checkboxes.forEach(cb => {
                    cb.disabled = false;
                    if (cb.id !== 'noneSource' && cb.checked) {
                        score += parseInt(cb.getAttribute('data-point'));
                    }
                });
                
                // Hide reflection if sources are checked or if no boxes are checked yet
                noneReflectionDiv.classList.add('hidden');
            }

            // Edge case: If the user unchecks everything, treat it as not answered yet (disables button)
            if (!interaction) {
                r1_answered = false;
                noneReflectionDiv.classList.add('hidden');
            }

            relevance1ValueSpan.textContent = score;
            
            // Update button state based on r1_answered
            if (r1_answered) {
                // ENABLED STATE
                evaluateButton.disabled = false;
                evaluateButton.classList.remove('bg-gray-400', 'cursor-not-allowed');
                evaluateButton.classList.add('bg-blue-600', 'hover:bg-blue-700');
                evaluateButton.textContent = "Evaluate Sources";
            } else {
                // DISABLED STATE
                evaluateButton.disabled = true;
                evaluateButton.classList.add('bg-gray-400', 'cursor-not-allowed');
                evaluateButton.classList.remove('bg-blue-600', 'hover:bg-blue-700', 'bg-green-600', 'hover:bg-green-700');
                evaluateButton.textContent = "Evaluate Sources"; 
            }

            return score;
        }

        relevance1Checkboxes.addEventListener('change', calculateRelevance1Score);


        // Initial state setup:
        evaluateButton.disabled = true;
        evaluateButton.classList.remove('bg-blue-600', 'hover:bg-blue-700');
        evaluateButton.classList.add('bg-gray-400', 'cursor-not-allowed');

        calculateRelevance1Score();
        
        document.getElementById('rubricForm').addEventListener('submit', function(event) {
            event.preventDefault();
            
            // Recalculate current score
            const relevance1Score = calculateRelevance1Score();
            
            // Since only Q1 remains, we immediately call the final result handler
            handleFinalResult(relevance1Score);

            // SCROLL TO RESULTS
            resultsDiv.classList.remove('hidden'); 
            resultsDiv.scrollIntoView({ behavior: 'smooth', block: 'start' });
        });


        // Function to handle Final Score Calculation and Result Display
        function handleFinalResult(relevance1Score) {
            
            const totalScore = relevance1Score;
            
            let priorityText = "";
            let priorityImage = "";
            let justificationContent = "";

            // PRIORITY LOGIC (Max Score: 9)
            // Low: 0-2, High: 3-5, Very High: 6-9
            
            if (totalScore >= 6) {
                priorityText = "VERY HIGH PRIORITY";
                priorityImage = "⭐⭐";
                justificationContent = `
                    <p class="mb-4">This article qualifies for <strong>VERY HIGH PRIORITY</strong> with a Sources Score of ${totalScore} out of 9. This score signifies <strong>exceptional community engagement and sourcing</strong>.</p>
                    <div class="bg-purple-100 border-l-4 border-purple-500 text-purple-700 p-4" role="alert">
                        <p class="font-bold">🎉 Exceptional Sourcing: Celebrating Community-Driven Reporting</p>
                        <p class="text-sm mt-2">Thank you for your commitment to equitable sourcing! This score is a direct result of successfully centering Latino and Spanish-speaking voices in your story, ensuring maximum relevance and trust. Your work is a model for <strong>community-first journalism</strong>.</p>
                        <p class="font-bold mt-4">🚀 Strategic Next Steps: Maximize Impact</p>
                        <ul class="list-disc list-inside space-y-2 mt-2">
                            <li><strong>Contact Editor IMMEDIATELY:</strong> Discuss making this a <strong>Spanish-First Article</strong> (primary language publication).</li>
                            <li><strong>Creative Content:</strong> Produce a <strong>short Spanish video</strong> (30-60 seconds) summarizing the key points for social media amplification.</li>
                            <li><strong>Social Strategy:</strong> Ensure all English social media posts related to this story include a Spanish translation.</li>
                            <li><strong>Partnership Amplification:</strong> Immediately share the Spanish-First article with local Spanish-first media outlets (e.g., Avanza, Univision) to maximize reach.</li>
                        </ul>
                    </div>
                `;
                justificationContainer.classList.add('text-left', 'max-w-lg');
                
            } else if (totalScore >= 3) {
                priorityText = "HIGH PRIORITY";
                priorityImage = "🔥";
                justificationContent = `
                    <p class="mb-4">This article qualifies for <strong>HIGH PRIORITY</strong> because the Sources Score is ${totalScore} out of 9, meeting the critical threshold of 3 points. This indicates strong community sourcing and high relevance to our Latino/Spanish-speaking audience.</p>
                    <div class="bg-green-100 border-l-4 border-green-500 text-green-700 p-4" role="alert">
                        <p class="font-bold">👍 Strong Sourcing: Building Trust and Relevance</p>
                        <p class="text-sm mt-2">Great work! Achieving a High Priority score shows you successfully incorporated key Latino and Spanish-speaking voices. This strong sourcing is fundamental to building trust with our audience.</p>
                        <p class="font-bold mt-4">✅ Next Step: Contact Your Editor</p>
                        <p>Immediate translation is recommended. Please contact your editor to discuss the next steps in the translation workflow and to schedule the article for publication.</p>
                    </div>
                `;
                justificationContainer.classList.add('text-left', 'max-w-lg'); 

            } else {
                priorityText = "Low Priority";
                priorityImage = "📉";
                justificationContent = `
                    <p class="mb-4">This article scored ${totalScore} out of 9, landing in the <strong>LOW PRIORITY</strong> category. A score of 0-2 suggests the article currently lacks the necessary community voices to warrant immediate translation resources, but this is a chance to elevate your reporting.</p>
                    <div class="bg-yellow-100 border-l-4 border-yellow-500 text-yellow-700 p-4" role="alert">
                        <p class="font-bold">🎯 Why Community Sourcing Matters</p>
                        <p class="text-sm mt-2">Including Latino and Spanish-speaking sources is crucial because it ensures <strong>accuracy</strong>, builds <strong>trust</strong> with a core audience, and prevents the perpetuation of biased or incomplete narratives. Without these voices, the story may miss critical context or be irrelevant to the community it affects.</p>
                        <p class="font-bold mt-4">💡 Strategic Sourcing Tips</p>
                        <ul class="list-disc list-inside space-y-2 mt-2 text-sm">
                            <li><strong>Identify Community Hubs:</strong> Instead of relying on official public relations lists, contact local community-based organizations (e.g., health clinics, non-profits, cultural centers) for expert referrals.</li>
                            <li><strong>Lead with Language:</strong> When seeking sources, always ask if they prefer to speak in Spanish. This simple act builds immediate rapport and unlocks richer quotes (which scores 2 points).</li>
                            <li><strong>Broaden the Net:</strong> Look beyond "officials." Seek out <strong>Affected</strong> residents or <strong>Subject/Doer</strong> sources (business owners, organizers, artists) who provide the human impact of the story.</li>
                        </ul>
                        <p class="mt-3">Use these strategies in your next reporting phase to strengthen the article's relevance before re-evaluating for translation.</p>
                    </div>
                `;
                justificationContainer.classList.add('text-left', 'max-w-lg'); 
            }

            document.getElementById('totalScore').textContent = totalScore;
            document.getElementById('priority').textContent = priorityText;
            document.getElementById('resultImage').textContent = priorityImage;
            document.getElementById('justificationContainer').innerHTML = justificationContent;
            
        }
    </script>
</body>
</html>
